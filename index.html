<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Scrimshaw Bay Campaign Guide</title>
    <link rel="stylesheet" href="src/styles/index.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Cinzel:wght@500;600;700&family=Crimson+Text:ital,wght@0,400;0,600;1,400&display=swap" rel="stylesheet">
    
    <!-- Import Map for ES6 Modules -->
    <script type="importmap">
    {
      "imports": {
        "@/": "./src/",
        "@/components/": "./src/components/",
        "@/services/": "./src/services/",
        "@/utils/": "./src/utils/",
        "@/styles/": "./src/styles/",
        "@/data/": "./data/",
        "data": "./data/data.js"
      }
    }
    </script>
</head>
<body>
    <header class="main-header">
        <h1>Scrimshaw Bay</h1>
        <p class="subtitle">A Gothic Horror Campaign</p>
    </header>

    <nav class="main-nav">
        <button class="nav-btn active" data-section="overview">Overview</button>
        <button class="nav-btn" data-section="settlements">Settlements</button>
        <button class="nav-btn" data-section="npcs">NPCs</button>
        <button class="nav-btn" data-section="threats">Threats</button>
        <button class="nav-btn" data-section="events">Events</button>
        <button class="nav-btn" data-section="lore">Lore</button>
    </nav>

    <main class="content">
        <!-- Overview Section -->
        <section id="overview" class="content-section active">
            <div class="section-header">
                <h2>Regional Overview</h2>
                <div class="quick-stats">
                    <div class="stat-card">
                        <h3>Location</h3>
                        <p>Northeastern Meridia</p>
                    </div>
                    <div class="stat-card">
                        <h3>Ocean</h3>
                        <p>Krivmansk Ocean</p>
                    </div>
                    <div class="stat-card">
                        <h3>Primary Threat</h3>
                        <p>Agog, Devil of the Deep</p>
                    </div>
                    <div class="stat-card">
                        <h3>Main Antagonist</h3>
                        <p>Lord Bayard Scrimm</p>
                    </div>
                </div>
            </div>

            <div class="content-grid">
                <div class="info-card">
                    <h3>Historical Context</h3>
                    <div class="timeline">
                        <div class="timeline-item">
                            <strong>Golden Age:</strong> Major whaling & ironwood trade hub
                        </div>
                        <div class="timeline-item">
                            <strong>Decline:</strong> Whale depletion, Greylocke trade route opened
                        </div>
                        <div class="timeline-item">
                            <strong>Present:</strong> Abandoned infrastructure, corrupted whaling
                        </div>
                    </div>
                </div>

                <div class="info-card">
                    <h3>Current Atmosphere</h3>
                    <ul>
                        <li>Gothic decay and cosmic dread</li>
                        <li>Abandoned docks and rotting piers</li>
                        <li>Derelict shipyards with half-built vessels</li>
                        <li>Crumbling mansions of former magnates</li>
                        <li>Dark, supernaturally cold waters</li>
                    </ul>
                </div>

                <div class="info-card settlement-overview">
                    <h3>Settlements</h3>
                    <div class="settlement-grid">
                        <button class="settlement-card" data-settlement="millhaven">
                            <div class="settlement-card-header">
                                <h4 class="settlement-name">Millhaven</h4>
                                <p class="settlement-type">Former Regional Hub</p>
                            </div>
                            <p class="settlement-description">Once the crown jewel of Scrimshaw Bay, now hosts more ghost ships than active vessels.</p>
                            <span class="population" title="Population: ~800">~800</span>
                        </button>
                        <button class="settlement-card" data-settlement="netherwick">
                            <div class="settlement-card-header">
                                <h4 class="settlement-name">Netherwick</h4>
                                <p class="settlement-type">Fishing Village</p>
                            </div>
                            <p class="settlement-description">Struggling fishing community where locals whisper that the fish taste metallic and wrong.</p>
                            <span class="population" title="Population: ~150">~150</span>
                        </button>
                        <button class="settlement-card" data-settlement="ashford">
                            <div class="settlement-card-header">
                                <h4 class="settlement-name">Ashford</h4>
                                <p class="settlement-type">Company Town</p>
                            </div>
                            <p class="settlement-description">Planned community that now stands largely empty with half-processed ironwood logs.</p>
                            <span class="population" title="Population: ~200">~200</span>
                        </button>
                        <button class="settlement-card" data-settlement="thornwick">
                            <div class="settlement-card-header">
                                <h4 class="settlement-name">Thornwick Isle</h4>
                                <p class="settlement-type">Lord's Estate</p>
                            </div>
                            <p class="settlement-description">Private island stronghold of Lord Scrimm and his declining household.</p>
                            <span class="population" title="Population: ~50">~50</span>
                        </button>
                        <button class="settlement-card" data-settlement="fenway">
                            <div class="settlement-card-header">
                                <h4 class="settlement-name">Fenway</h4>
                                <p class="settlement-type">Canal Village</p>
                            </div>
                            <p class="settlement-description">Abandoned transport hub where canals have grown over with strange vegetation.</p>
                            <span class="population" title="Population: ~75">~75</span>
                        </button>
                    </div>
                </div>
            </div>
        </section>

        <!-- Settlements Section -->
        <section id="settlements" class="content-section">
            <div class="section-header">
                <h2>Settlements</h2>
                <div class="settlement-selector">
                    <button class="settlement-nav-btn active" data-settlement="millhaven">
                        <span class="settlement-name">Millhaven</span>
                        <span class="settlement-type">Former Regional Hub</span>
                    </button>
                    <button class="settlement-nav-btn" data-settlement="netherwick">
                        <span class="settlement-name">Netherwick</span>
                        <span class="settlement-type">Fishing Village</span>
                    </button>
                    <button class="settlement-nav-btn" data-settlement="ashford">
                        <span class="settlement-name">Ashford</span>
                        <span class="settlement-type">Company Town</span>
                    </button>
                    <button class="settlement-nav-btn" data-settlement="thornwick">
                        <span class="settlement-name">Thornwick Isle</span>
                        <span class="settlement-type">Lord's Estate</span>
                    </button>
                    <button class="settlement-nav-btn" data-settlement="fenway">
                        <span class="settlement-name">Fenway</span>
                        <span class="settlement-type">Canal Village</span>
                    </button>
                </div>
            </div>
            <div id="settlement-details"></div>
        </section>

        <!-- NPCs Section -->
        <section id="npcs" class="content-section">
            <div class="section-header">
                <h2>Notable NPCs</h2>
            </div>
            <div id="npc-list" class="npc-grid"></div>
        </section>

        <!-- Threats Section -->
        <section id="threats" class="content-section">
            <div class="section-header">
                <h2>Threats & Horrors</h2>
            </div>
            <div class="content-grid">
                <div class="threat-card cosmic">
                    <h3>Agog, Devil of the Deep</h3>
                    <p class="threat-type">Cosmic Horror</p>
                    <p>Ancient titanic aberration dwelling in the deepest trenches of the Krivmansk Ocean. Primary source of all regional corruption.</p>
                    <div class="corruption-indicator extreme">Extreme Corruption</div>
                    <button class="details-btn" data-threat="agog">View Details</button>
                </div>
                
                <div class="threat-card aristocratic">
                    <h3>Lord Bayard Scrimm</h3>
                    <p class="threat-type">Corrupted Aristocrat</p>
                    <p>Ancient lord sustained by pact with Agog. His body writhes with tentacled flesh, and he emerges only at night to feed.</p>
                    <button class="details-btn" data-threat="bayard">View Details</button>
                </div>

                <div class="threat-card environmental">
                    <h3>Corrupted Whaling</h3>
                    <p class="threat-type">Body Horror</p>
                    <p>Diseased whales infected with black parasites that transform humanoids into fish-like creatures over time.</p>
                    <div class="corruption-indicator high">High Corruption</div>
                    <button class="details-btn" data-threat="corruptedWhales">View Details</button>
                </div>

                <div class="threat-card social">
                    <h3>Fish-Folk Transformation</h3>
                    <p class="threat-type">Body Horror</p>
                    <p>Citizens infected by parasites gradually transform into Kuo-toa through distinct stages.</p>
                    <div class="corruption-indicator medium">Medium Corruption</div>
                    <button class="details-btn" data-threat="transformedCitizens">View Details</button>
                </div>

                <div class="threat-card industrial">
                    <h3>Rotting Ironwood</h3>
                    <p class="threat-type">Environmental Horror</p>
                    <p>Legendary ironwood timber rotting despite its durability, causing economic and structural collapse.</p>
                    <div class="corruption-indicator medium">Medium Corruption</div>
                    <button class="details-btn" data-threat="ironwoodCorruption">View Details</button>
                </div>

                <div class="threat-card planar">
                    <h3>Poisoned Wetlands</h3>
                    <p class="threat-type">Environmental Horror</p>
                    <p>Bog waters poisoned by ancient entities, creating dangerous wetlands that distort reality.</p>
                    <div class="corruption-indicator medium">Medium Corruption</div>
                    <button class="details-btn" data-threat="bogCorruption">View Details</button>
                </div>

                <div class="threat-card environmental">
                    <h3>Bog Creatures</h3>
                    <p class="threat-type">Natural Hazards</p>
                    <p>Dangerous amphibious creatures including Bogskaldr, Marsh Giants, and Marshwalker Elves make bog travel extremely perilous.</p>
                    <div class="corruption-indicator low">Low Corruption</div>
                    <button class="details-btn" data-threat="bogCreatures">View Details</button>
                </div>
            </div>
        </section>

        <!-- Events Section -->
        <section id="events" class="content-section">
            <div class="section-header">
                <h2>Strange Events</h2>
            </div>
            <div id="events-list"></div>
        </section>

        <!-- Lore Section -->
        <section id="lore" class="content-section">
            <div class="section-header">
                <h2>Lore & Background</h2>
            </div>
            <div class="lore-grid">
                <div class="lore-card">
                    <h3>The Whaling Era</h3>
                    <p>Once the heart of a thriving whaling industry, Scrimshaw Bay's wealth was built on whale oil and bone products.</p>
                </div>
                <div class="lore-card">
                    <h3>Ironwood Trade</h3>
                    <p>The region served as the sole export point for ironwood timber from Timber Giant territories in the interior.</p>
                </div>
                <div class="lore-card">
                    <h3>The Decline</h3>
                    <p>Overharvesting depleted whale populations while new trade routes through Greylocke bypassed the bay entirely.</p>
                </div>
            </div>
        </section>
    </main>

    <!-- HTML Templates -->
    <template id="settlement-card-template">
        <div class="settlement-card" role="button" tabindex="0">
            <div class="settlement-card-header">
                <h4 class="settlement-name" data-slot="name">Settlement Name</h4>
                <p class="settlement-type" data-slot="type">Settlement Type</p>
            </div>
            <p class="settlement-description" data-slot="description">Settlement description...</p>
            <span class="population" data-slot="population" data-slot-attr="title">Population</span>
        </div>
    </template>

    <template id="settlement-detail-header-template">
        <h3 data-slot="name">Settlement Name</h3>
        <div class="settlement-meta">
            <span class="settlement-type" data-slot="type">Settlement Type</span>
            <span class="settlement-population" data-slot="population">Population</span>
        </div>
    </template>

    <template id="location-item-template">
        <div class="location-item">
            <div class="location-header">
                <h5 class="location-name" data-slot="name">Location Name</h5>
                <span class="detail-indicator" data-slot="detailIndicator" style="display: none;">📄</span>
                <button class="location-detail-btn" data-slot="detailButton" style="display: none;">Details</button>
            </div>
            <p class="location-desc" data-slot="shortDesc">Location description...</p>
            <div class="location-npcs" data-slot="npcsContainer" style="display: none;">
                <strong>NPCs:</strong>
                <div data-slot="npcs"></div>
            </div>
        </div>
    </template>

    <template id="npc-link-template">
        <button class="npc-link">
            <span class="npc-name" data-slot="name">NPC Name</span>
            <span class="npc-role-small" data-slot="role">NPC Role</span>
        </button>
    </template>

    <template id="npc-mini-link-template">
        <button class="npc-mini-link" data-slot="name">NPC Name</button>
    </template>

    <template id="npc-card-template">
        <div class="npc-card" role="button" tabindex="0">
            <div class="npc-header">
                <h3 class="npc-name" data-slot="name">NPC Name</h3>
                <span class="npc-location" data-slot="location">Location</span>
            </div>
            <div class="npc-role" data-slot="role">NPC Role</div>
            <div class="npc-description" data-slot="description">NPC description...</div>
            
            <div class="npc-stats" data-slot="stats" style="display: none;">
                <span class="stat-item" data-slot="statsContent"></span>
            </div>
            
            <div class="npc-secrets" data-slot="secrets" style="display: none;">
                <h4>Secrets:</h4>
                <ul data-slot="secretsList"></ul>
            </div>
            
            <div class="npc-motivations" data-slot="motivations" style="display: none;">
                <h4>Motivations:</h4>
                <ul data-slot="motivationsList"></ul>
            </div>
            
            <div class="npc-abilities" data-slot="abilities" style="display: none;">
                <h4>Abilities:</h4>
                <ul data-slot="abilitiesList"></ul>
            </div>
        </div>
    </template>

    <template id="threat-card-template">
        <div class="threat-card" role="button" tabindex="0">
            <div class="threat-header">
                <h4 class="threat-name" data-slot="name">Threat Name</h4>
                <p class="threat-type" data-slot="type">Threat Type</p>
            </div>
            <p class="threat-description" data-slot="description">Threat description...</p>
            <div class="threat-danger" data-slot="danger">
                <span class="danger-level" data-slot="dangerLevel">Low</span>
            </div>
        </div>
    </template>

    <template id="event-card-template">
        <div class="event-card info-card" role="button" tabindex="0">
            <h3 data-slot="name">Event Name</h3>
            <p><strong>Description:</strong> <span data-slot="description">Event description...</span></p>
            <p data-slot="trigger" style="display: none;"><strong>Trigger:</strong> <span data-slot="triggerText">Trigger text</span></p>
            
            <div class="event-details" data-slot="details" style="display: none;">
                <div class="event-outcomes" data-slot="outcomes" style="display: none;">
                    <h4>Possible Outcomes:</h4>
                    <ul data-slot="outcomesList"></ul>
                </div>
                
                <div class="event-hooks" data-slot="hooks" style="display: none;">
                    <h4>Adventure Hooks:</h4>
                    <ul data-slot="hooksList"></ul>
                </div>
                
                <div class="event-ritual" data-slot="ritual" style="display: none;">
                    <h4>Ritual Requirements:</h4>
                    <ol data-slot="ritualList"></ol>
                </div>
                
                <div class="event-creature" data-slot="creature" style="display: none;">
                    <h4 data-slot="creatureName">Creature:</h4>
                    <p data-slot="creatureDescription">Creature description</p>
                    <p data-slot="creatureMechanics" style="display: none;"><strong>Mechanics:</strong> <span data-slot="mechanicsText">Mechanics</span></p>
                </div>
                
                <div class="event-clues" data-slot="clues" style="display: none;">
                    <h4 data-slot="cluesTitle">Clues:</h4>
                    <ul data-slot="cluesList"></ul>
                </div>
            </div>
            
            <div class="event-network" data-slot="network" style="display: none;">
                <div class="network-section" data-slot="relatedNpcs" style="display: none;">
                    <h4>🧙 Related NPCs:</h4>
                    <div class="network-links" data-slot="npcLinks"></div>
                </div>
                
                <div class="network-section" data-slot="relatedLocations" style="display: none;">
                    <h4>📍 Related Locations:</h4>
                    <div class="network-links" data-slot="locationLinks"></div>
                </div>
                
                <div class="network-section" data-slot="relatedThreats" style="display: none;">
                    <h4>⚠️ Related Threats:</h4>
                    <div class="network-links" data-slot="threatLinks"></div>
                </div>
            </div>
        </div>
    </template>

    <!-- Modal Templates -->
    <template id="npc-modal-template">
        <div class="npc-network-modal">
            <div class="npc-section">
                <h4>Role:</h4>
                <p class="npc-role" data-slot="role">NPC Role</p>
            </div>
            
            <div class="npc-section">
                <h4>Description:</h4>
                <p class="npc-description" data-slot="description">NPC description</p>
            </div>
            
            <div class="npc-section npc-services" data-slot="services" style="display: none;">
                <h4>Services:</h4>
                <ul data-slot="servicesList"></ul>
            </div>
            
            <div class="npc-section npc-knowledge" data-slot="knowledge" style="display: none;">
                <h4>Knowledge:</h4>
                <div class="knowledge-list" data-slot="knowledgeList"></div>
            </div>
            
            <div class="gm-sections">
                <div class="gm-header">
                    <h3>🎲 GM Information</h3>
                    <p class="gm-note">The following sections contain GM-only information</p>
                </div>
                
                <div class="gm-section npc-secrets" data-slot="secrets" style="display: none;">
                    <h4>Secrets:</h4>
                    <ul data-slot="secretsList"></ul>
                </div>
                
                <div class="gm-section npc-motivations" data-slot="motivations" style="display: none;">
                    <h4>Motivations:</h4>
                    <ul data-slot="motivationsList"></ul>
                </div>
                
                <div class="gm-section" data-slot="abilities" style="display: none;">
                    <h4>Abilities:</h4>
                    <ul data-slot="abilitiesList"></ul>
                </div>
            </div>
        </div>
    </template>

    <template id="threat-modal-template">
        <div class="threat-network-modal">
            <p class="threat-type" data-slot="type">Threat Type</p>
            <p class="threat-description" data-slot="description">Threat description</p>
            
            <div class="threat-section" data-slot="abilities" style="display: none;">
                <h4>Abilities:</h4>
                <ul data-slot="abilitiesList"></ul>
            </div>
            
            <div class="threat-section" data-slot="effects" style="display: none;">
                <h4 data-slot="effectsTitle">Effects:</h4>
                <ul data-slot="effectsList"></ul>
            </div>
            
            <div class="threat-section" data-slot="creatures" style="display: none;">
                <h4>Creature Types:</h4>
                <div class="creature-list" data-slot="creatureList"></div>
            </div>
            
            <div class="threat-section" data-slot="encounterNotes" style="display: none;">
                <h4>Encounter Notes:</h4>
                <ul data-slot="encounterNotesList"></ul>
            </div>
            
            <div class="threat-section" data-slot="process" style="display: none;">
                <h4>Process:</h4>
                <ul data-slot="processList"></ul>
            </div>
            
            <div class="threat-section" data-slot="stages" style="display: none;">
                <h4>Transformation Stages:</h4>
                <ul data-slot="stagesList"></ul>
            </div>
            
            <div class="threat-network">
                <h3>Threat Network</h3>
                
                <div class="network-section" data-slot="affectedNpcs" style="display: none;">
                    <h4>🧙 Affected NPCs:</h4>
                    <div class="network-links" data-slot="npcLinks"></div>
                </div>
                
                <div class="network-section" data-slot="affectedLocations" style="display: none;">
                    <h4>📍 Affected Locations:</h4>
                    <div class="network-links" data-slot="locationLinks"></div>
                </div>
                
                <div class="network-section" data-slot="affectedSettlements" style="display: none;">
                    <h4>🏘️ Affected Settlements:</h4>
                    <div class="network-links" data-slot="settlementLinks"></div>
                </div>
                
                <div class="network-section" data-slot="relatedEvents" style="display: none;">
                    <h4>📅 Related Events:</h4>
                    <div class="network-links" data-slot="eventLinks"></div>
                </div>
                
                <div class="network-section" data-slot="relatedThreats" style="display: none;">
                    <h4>⚠️ Related Threats:</h4>
                    <div class="network-links" data-slot="threatLinks"></div>
                </div>
            </div>
            
            <div class="threat-section" data-slot="timeline" style="display: none;">
                <h4>Timeline:</h4>
                <p data-slot="timelineText">Timeline text</p>
            </div>
            
            <div class="threat-section" data-slot="stats" style="display: none;">
                <h4>Game Stats:</h4>
                <p data-slot="statsText">Stats text</p>
            </div>
            
            <div class="threat-section" data-slot="gameStats" style="display: none;">
                <h4>Game Statistics:</h4>
                <p data-slot="gameStatsText">Game stats text</p>
            </div>
            
            <div class="threat-section" data-slot="weaknesses" style="display: none;">
                <h4>Weaknesses:</h4>
                <ul data-slot="weaknessesList"></ul>
            </div>
        </div>
    </template>

    <template id="location-modal-template">
        <div class="location-network-modal">
            <div class="location-section">
                <h4>Description:</h4>
                <p class="location-description" data-slot="description">Location description</p>
            </div>
            
            <div class="location-section" data-slot="features" style="display: none;">
                <h4>Features:</h4>
                <ul data-slot="featuresList"></ul>
            </div>
            
            <div class="location-section" data-slot="atmosphere" style="display: none;">
                <h4>Atmosphere:</h4>
                <p data-slot="atmosphereText">Atmosphere description</p>
            </div>
            
            <div class="location-section" data-slot="history" style="display: none;">
                <h4>History:</h4>
                <p data-slot="historyText">History description</p>
            </div>
            
            <div class="location-section" data-slot="hazards" style="display: none;">
                <h4>Hazards:</h4>
                <ul data-slot="hazardsList"></ul>
            </div>
            
            <div class="location-section" data-slot="secrets" style="display: none;">
                <h4>Secrets:</h4>
                <ul data-slot="secretsList"></ul>
            </div>
            
            <div class="location-network">
                <h3>Location Network</h3>
                
                <div class="network-section" data-slot="npcs" style="display: none;">
                    <h4>🧙 NPCs:</h4>
                    <div class="network-links" data-slot="npcLinks"></div>
                </div>
                
                <div class="network-section" data-slot="connectedLocations" style="display: none;">
                    <h4>📍 Connected Locations:</h4>
                    <div class="network-links" data-slot="locationLinks"></div>
                </div>
                
                <div class="network-section" data-slot="relatedThreats" style="display: none;">
                    <h4>⚠️ Related Threats:</h4>
                    <div class="network-links" data-slot="threatLinks"></div>
                </div>
                
                <div class="network-section" data-slot="relatedEvents" style="display: none;">
                    <h4>📅 Related Events:</h4>
                    <div class="network-links" data-slot="eventLinks"></div>
                </div>
            </div>
        </div>
    </template>

    <script type="module" src="src/index.js"></script>
</body>
</html>