<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Scrimshaw Bay Campaign Guide</title>
    <link rel="stylesheet" href="src/styles/index.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Cinzel:wght@500;600;700&family=Crimson+Text:ital,wght@0,400;0,600;1,400&display=swap" rel="stylesheet">
    
    <!-- Import Map for ES6 Modules -->
    <script type="importmap">
    {
      "imports": {
        "@/": "./src/",
        "@/components/": "./src/components/",
        "@/services/": "./src/services/",
        "@/utils/": "./src/utils/",
        "@/styles/": "./src/styles/",
        "@/data/": "./data/",
        "data": "./data/data.js"
      }
    }
    </script>
</head>
<body>
    <header class="main-header">
        <h1>Scrimshaw Bay</h1>
        <p class="subtitle">A Gothic Horror Campaign</p>
    </header>

    <nav class="main-nav">
        <button class="nav-btn active" data-section="overview">Overview</button>
        <button class="nav-btn" data-section="settlements">Settlements</button>
        <button class="nav-btn" data-section="npcs">NPCs</button>
        <button class="nav-btn" data-section="threats">Threats</button>
        <button class="nav-btn" data-section="events">Events</button>
        <button class="nav-btn" data-section="lore">Lore</button>
    </nav>

    <main class="content">
        <!-- Overview Section -->
        <section id="overview" class="content-section active">
            <div class="section-header">
                <h2>Regional Overview</h2>
                <div class="quick-stats">
                    <div class="stat-card">
                        <h3>Location</h3>
                        <p>Northeastern Meridia</p>
                    </div>
                    <div class="stat-card">
                        <h3>Ocean</h3>
                        <p>Krivmansk Ocean</p>
                    </div>
                    <div class="stat-card">
                        <h3>Primary Threat</h3>
                        <p>Agog, Devil of the Deep</p>
                    </div>
                    <div class="stat-card">
                        <h3>Main Antagonist</h3>
                        <p>Lord Bayard Scrimm</p>
                    </div>
                </div>
            </div>

            <div class="content-grid">
                <div class="info-card">
                    <h3>Historical Context</h3>
                    <div class="timeline">
                        <div class="timeline-item">
                            <strong>Golden Age:</strong> Major whaling & ironwood trade hub
                        </div>
                        <div class="timeline-item">
                            <strong>Decline:</strong> Whale depletion, Greylocke trade route opened
                        </div>
                        <div class="timeline-item">
                            <strong>Present:</strong> Abandoned infrastructure, corrupted whaling
                        </div>
                    </div>
                </div>

                <div class="info-card">
                    <h3>Current Atmosphere</h3>
                    <ul>
                        <li>Gothic decay and cosmic dread</li>
                        <li>Abandoned docks and rotting piers</li>
                        <li>Derelict shipyards with half-built vessels</li>
                        <li>Crumbling mansions of former magnates</li>
                        <li>Dark, supernaturally cold waters</li>
                    </ul>
                </div>

                <div class="info-card settlement-overview">
                    <h3>Settlements</h3>
                    <div class="settlement-grid">
                        <button class="settlement-card" data-settlement="millhaven">
                            <div class="settlement-card-header">
                                <h4 class="settlement-name">Millhaven</h4>
                                <p class="settlement-type">Former Regional Hub</p>
                            </div>
                            <p class="settlement-description">Once the crown jewel of Scrimshaw Bay, now hosts more ghost ships than active vessels.</p>
                            <span class="population" title="Population: ~800">~800</span>
                        </button>
                        <button class="settlement-card" data-settlement="netherwick">
                            <div class="settlement-card-header">
                                <h4 class="settlement-name">Netherwick</h4>
                                <p class="settlement-type">Fishing Village</p>
                            </div>
                            <p class="settlement-description">Struggling fishing community where locals whisper that the fish taste metallic and wrong.</p>
                            <span class="population" title="Population: ~150">~150</span>
                        </button>
                        <button class="settlement-card" data-settlement="ashford">
                            <div class="settlement-card-header">
                                <h4 class="settlement-name">Ashford</h4>
                                <p class="settlement-type">Company Town</p>
                            </div>
                            <p class="settlement-description">Planned community that now stands largely empty with half-processed ironwood logs.</p>
                            <span class="population" title="Population: ~200">~200</span>
                        </button>
                        <button class="settlement-card" data-settlement="thornwick">
                            <div class="settlement-card-header">
                                <h4 class="settlement-name">Thornwick Isle</h4>
                                <p class="settlement-type">Lord's Estate</p>
                            </div>
                            <p class="settlement-description">Private island stronghold of Lord Scrimm and his declining household.</p>
                            <span class="population" title="Population: ~50">~50</span>
                        </button>
                        <button class="settlement-card" data-settlement="fenway">
                            <div class="settlement-card-header">
                                <h4 class="settlement-name">Fenway</h4>
                                <p class="settlement-type">Canal Village</p>
                            </div>
                            <p class="settlement-description">Abandoned transport hub where canals have grown over with strange vegetation.</p>
                            <span class="population" title="Population: ~75">~75</span>
                        </button>
                    </div>
                </div>
            </div>
        </section>

        <!-- Settlements Section -->
        <section id="settlements" class="content-section">
            <div class="section-header">
                <h2>Settlements</h2>
                <div class="settlement-selector">
                    <button class="settlement-nav-btn active" data-settlement="millhaven">
                        <span class="settlement-name">Millhaven</span>
                        <span class="settlement-type">Former Regional Hub</span>
                    </button>
                    <button class="settlement-nav-btn" data-settlement="netherwick">
                        <span class="settlement-name">Netherwick</span>
                        <span class="settlement-type">Fishing Village</span>
                    </button>
                    <button class="settlement-nav-btn" data-settlement="ashford">
                        <span class="settlement-name">Ashford</span>
                        <span class="settlement-type">Company Town</span>
                    </button>
                    <button class="settlement-nav-btn" data-settlement="thornwick">
                        <span class="settlement-name">Thornwick Isle</span>
                        <span class="settlement-type">Lord's Estate</span>
                    </button>
                    <button class="settlement-nav-btn" data-settlement="fenway">
                        <span class="settlement-name">Fenway</span>
                        <span class="settlement-type">Canal Village</span>
                    </button>
                </div>
            </div>
            <div id="settlement-details"></div>
        </section>

        <!-- NPCs Section -->
        <section id="npcs" class="content-section">
            <div class="section-header">
                <h2>Notable NPCs</h2>
            </div>
            <div id="npc-list" class="npc-grid"></div>
        </section>

        <!-- Threats Section -->
        <section id="threats" class="content-section">
            <div class="section-header">
                <h2>Threats & Horrors</h2>
            </div>
            <div class="content-grid">
                <div class="threat-card cosmic">
                    <h3>Agog, Devil of the Deep</h3>
                    <p class="threat-type">Cosmic Horror</p>
                    <p>Ancient titanic aberration dwelling in the deepest trenches of the Krivmansk Ocean. Primary source of all regional corruption.</p>
                    <div class="corruption-indicator extreme">Extreme Corruption</div>
                    <button class="details-btn" data-threat="agog">View Details</button>
                </div>
                
                <div class="threat-card aristocratic">
                    <h3>Lord Bayard Scrimm</h3>
                    <p class="threat-type">Corrupted Aristocrat</p>
                    <p>Ancient lord sustained by pact with Agog. His body writhes with tentacled flesh, and he emerges only at night to feed.</p>
                    <button class="details-btn" data-threat="bayard">View Details</button>
                </div>

                <div class="threat-card environmental">
                    <h3>Corrupted Whaling</h3>
                    <p class="threat-type">Body Horror</p>
                    <p>Diseased whales infected with black parasites that transform humanoids into fish-like creatures over time.</p>
                    <div class="corruption-indicator high">High Corruption</div>
                    <button class="details-btn" data-threat="corruptedWhales">View Details</button>
                </div>

                <div class="threat-card social">
                    <h3>Fish-Folk Transformation</h3>
                    <p class="threat-type">Body Horror</p>
                    <p>Citizens infected by parasites gradually transform into Kuo-toa through distinct stages.</p>
                    <div class="corruption-indicator medium">Medium Corruption</div>
                    <button class="details-btn" data-threat="transformedCitizens">View Details</button>
                </div>

                <div class="threat-card industrial">
                    <h3>Rotting Ironwood</h3>
                    <p class="threat-type">Environmental Horror</p>
                    <p>Legendary ironwood timber rotting despite its durability, causing economic and structural collapse.</p>
                    <div class="corruption-indicator medium">Medium Corruption</div>
                    <button class="details-btn" data-threat="ironwoodCorruption">View Details</button>
                </div>

                <div class="threat-card planar">
                    <h3>Poisoned Wetlands</h3>
                    <p class="threat-type">Environmental Horror</p>
                    <p>Bog waters poisoned by ancient entities, creating dangerous wetlands that distort reality.</p>
                    <div class="corruption-indicator medium">Medium Corruption</div>
                    <button class="details-btn" data-threat="bogCorruption">View Details</button>
                </div>

                <div class="threat-card environmental">
                    <h3>Bog Creatures</h3>
                    <p class="threat-type">Natural Hazards</p>
                    <p>Dangerous amphibious creatures including Bogskaldr, Marsh Giants, and Marshwalker Elves make bog travel extremely perilous.</p>
                    <div class="corruption-indicator low">Low Corruption</div>
                    <button class="details-btn" data-threat="bogCreatures">View Details</button>
                </div>
            </div>
        </section>

        <!-- Events Section -->
        <section id="events" class="content-section">
            <div class="section-header">
                <h2>Strange Events</h2>
            </div>
            <div id="events-list"></div>
        </section>

        <!-- Lore Section -->
        <section id="lore" class="content-section">
            <div class="section-header">
                <h2>Lore & Background</h2>
            </div>
            <div class="lore-grid">
                <div class="lore-card">
                    <h3>The Whaling Era</h3>
                    <p>Once the heart of a thriving whaling industry, Scrimshaw Bay's wealth was built on whale oil and bone products.</p>
                </div>
                <div class="lore-card">
                    <h3>Ironwood Trade</h3>
                    <p>The region served as the sole export point for ironwood timber from Timber Giant territories in the interior.</p>
                </div>
                <div class="lore-card">
                    <h3>The Decline</h3>
                    <p>Overharvesting depleted whale populations while new trade routes through Greylocke bypassed the bay entirely.</p>
                </div>
            </div>
        </section>
    </main>

    <!-- HTML Templates -->
    <template id="settlement-card-template">
        <div class="settlement-card" role="button" tabindex="0">
            <div class="settlement-card-header">
                <h4 class="settlement-name" data-slot="name">Settlement Name</h4>
                <p class="settlement-type" data-slot="type">Settlement Type</p>
            </div>
            <p class="settlement-description" data-slot="description">Settlement description...</p>
            <span class="population" data-slot="population" data-slot-attr="title">Population</span>
        </div>
    </template>

    <template id="settlement-detail-header-template">
        <h3 data-slot="name">Settlement Name</h3>
        <div class="settlement-meta">
            <span class="settlement-type" data-slot="type">Settlement Type</span>
            <span class="settlement-population" data-slot="population">Population</span>
        </div>
    </template>

    <template id="location-item-template">
        <div class="location-item">
            <div class="location-header">
                <h5 class="location-name" data-slot="name">Location Name</h5>
                <span class="detail-indicator" data-slot="detailIndicator" style="display: none;">📄</span>
                <button class="location-detail-btn" data-slot="detailButton" style="display: none;">Details</button>
            </div>
            <p class="location-desc" data-slot="shortDesc">Location description...</p>
            <div class="location-npcs" data-slot="npcsContainer" style="display: none;">
                <strong>NPCs:</strong>
                <div data-slot="npcs"></div>
            </div>
        </div>
    </template>

    <template id="npc-link-template">
        <button class="npc-link">
            <span class="npc-name" data-slot="name">NPC Name</span>
            <span class="npc-role-small" data-slot="role">NPC Role</span>
        </button>
    </template>

    <template id="npc-mini-link-template">
        <button class="npc-mini-link" data-slot="name">NPC Name</button>
    </template>

    <template id="npc-card-template">
        <div class="npc-card" role="button" tabindex="0">
            <div class="npc-header">
                <h4 class="npc-name" data-slot="name">NPC Name</h4>
                <p class="npc-role" data-slot="role">NPC Role</p>
            </div>
            <p class="npc-description" data-slot="description">NPC description...</p>
            <div class="npc-stats" data-slot="stats" style="display: none;">
                <span class="stat-item" data-slot="statsContent"></span>
            </div>
        </div>
    </template>

    <template id="threat-card-template">
        <div class="threat-card" role="button" tabindex="0">
            <div class="threat-header">
                <h4 class="threat-name" data-slot="name">Threat Name</h4>
                <p class="threat-type" data-slot="type">Threat Type</p>
            </div>
            <p class="threat-description" data-slot="description">Threat description...</p>
            <div class="threat-danger" data-slot="danger">
                <span class="danger-level" data-slot="dangerLevel">Low</span>
            </div>
        </div>
    </template>

    <template id="event-card-template">
        <div class="event-card" role="button" tabindex="0">
            <div class="event-header">
                <h4 class="event-name" data-slot="name">Event Name</h4>
                <p class="event-type" data-slot="type">Event Type</p>
            </div>
            <p class="event-description" data-slot="description">Event description...</p>
            <div class="event-frequency" data-slot="frequency">
                <span class="frequency-indicator" data-slot="frequencyLevel">Common</span>
            </div>
        </div>
    </template>

    <script type="module" src="src/index.js"></script>
</body>
</html>